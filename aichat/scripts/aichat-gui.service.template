[Unit]
Description=AI Chat GUI - Tự động khởi động GUI khi boot Raspberry Pi
After=graphical.target
Wants=graphical.target
# Chỉ đợi graphical.target (X server), không đợi network

[Service]
Type=simple
User=__USER__
Group=__USER__
WorkingDirectory=__PROJECT_DIR__
Environment="DISPLAY=:0"
Environment="XAUTHORITY=__HOME__/.Xauthority"
Environment="QT_QPA_PLATFORM=wayland;xcb"
# Đợi một chút để đảm bảo X server sẵn sàng
ExecStartPre=/bin/sleep 3
# Chạy đơn giản: cd và python3 main.py
ExecStart=/bin/bash -c "cd __PROJECT_DIR__ && python3 main.py"
Restart=on-failure
RestartSec=15
# Restart nếu lỗi, đợi 15 giây trước khi restart
StandardOutput=journal
StandardError=journal

[Install]
WantedBy=graphical.target
